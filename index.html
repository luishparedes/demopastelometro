<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PASTELOMETRO - DEMO</title>
    <style>
        /* ... (estilos anteriores se mantienen igual) ... */

        /* Nuevos estilos para restricciones */
        .disabled-feature {
            opacity: 0.6;
            pointer-events: none;
            position: relative;
        }
        
        .disabled-feature::after {
            content: "✪ Versión completa";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #ffc107;
            color: #000;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .upgrade-banner {
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 154, 158, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 154, 158, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 154, 158, 0); }
        }
        
        .feature-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-comparison div {
            padding: 15px;
            border-radius: 8px;
        }
        
        .demo-features {
            background-color: #f8f9fa;
            border: 2px dashed #adb5bd;
        }
        
        .pro-features {
            background-color: #e2f0cb;
            border: 2px solid #28a745;
        }
        
        .feature-list {
            list-style-type: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .feature-list li:before {
            content: "✓";
            margin-right: 10px;
            color: #28a745;
        }
        
        .demo-features .feature-list li:before {
            content: "✗";
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 id="business-name">PASTELOMETRO - DEMO</h1>
            <p>Calculadora inteligente para repostería</p>
        </header>
        
        <div class="upgrade-banner">
            <h3>¡Versión DEMO limitada!</h3>
            <p>Estás usando la versión gratuita con restricciones. <a href="#upgrade" style="color: white; text-decoration: underline;">Actualiza ahora</a> para desbloquear todas las funciones.</p>
        </div>
        
        <!-- ... (resto del HTML anterior se mantiene igual) ... -->
        
        <!-- Sección de actualización mejorada -->
        <div id="upgrade" class="card" style="margin-top: 30px;">
            <h2 style="text-align: center; color: #d63384;">¡Desbloquea el Pastelómetro Completo!</h2>
            
            <div class="feature-comparison">
                <div class="demo-features">
                    <h3>Versión DEMO</h3>
                    <ul class="feature-list">
                        <li>Máximo 3 ingredientes</li>
                        <li>Máximo 2 recetas</li>
                        <li>Máximo 3 ventas</li>
                        <li>Sin edición de registros</li>
                        <li>Sin exportación de datos</li>
                        <li>Soporte básico</li>
                    </ul>
                </div>
                
                <div class="pro-features">
                    <h3>Versión COMPLETA</h3>
                    <ul class="feature-list">
                        <li>Ingredientes ilimitados</li>
                        <li>Recetas ilimitadas</li>
                        <li>Ventas ilimitadas</li>
                        <li>Edición completa</li>
                        <li>Exportación/Importación</li>
                        <li>Reportes avanzados</li>
                        <li>Soporte prioritario</li>
                        <li>Actualizaciones gratuitas</li>
                    </ul>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <p style="font-size: 1.2rem;">Precio especial: <strong>$19.99</strong> (antes $29.99)</p>
                <p style="font-style: italic;">¡Oferta por tiempo limitado!</p>
                
                <button onclick="window.open('https://forms.gle/6r4N6V6giwsxmvJ37', '_blank')" 
                        style="background: linear-gradient(to right, #ff6b6b, #ff8e8e); 
                               padding: 15px 40px; 
                               font-size: 1.2rem;
                               border-radius: 30px;
                               margin: 20px 0;">
                    ¡Quiero la Versión Completa!
                </button>
                
                <p style="font-size: 0.9rem; color: #666;">Pago único - Sin suscripciones - Garantía de 30 días</p>
            </div>
        </div>
    </div>

    <script>
        // ... (código anterior se mantiene igual hasta las constantes) ...
        
        // Nuevos límites más estrictos para la DEMO
        const MAX_INGREDIENTS_DEMO = 3;
        const MAX_RECIPES_DEMO = 2;
        const MAX_SALES_DEMO = 3;
        
        // ... (código anterior se mantiene igual hasta las funciones de ingredientes) ...
        
        function addIngredient() {
            // Verificar límite de ingredientes en demo
            if (ingredients.length >= MAX_INGREDIENTS_DEMO) {
                showUpgradeModal(
                    "Límite de ingredientes alcanzado", 
                    `La versión DEMO solo permite ${MAX_INGREDIENTS_DEMO} ingredientes. 
                    Actualiza a la versión completa para agregar ingredientes ilimitados.`
                );
                return;
            }
            
            // ... (resto de la función addIngredient se mantiene igual) ...
        }
        
        // Nueva función para mostrar modal de actualización
        function showUpgradeModal(title, message) {
            const modal = document.createElement('div');
            modal.style.position = 'fixed';
            modal.style.top = '0';
            modal.style.left = '0';
            modal.style.width = '100%';
            modal.style.height = '100%';
            modal.style.backgroundColor = 'rgba(0,0,0,0.5)';
            modal.style.display = 'flex';
            modal.style.justifyContent = 'center';
            modal.style.alignItems = 'center';
            modal.style.zIndex = '1000';
            
            modal.innerHTML = `
                <div style="background: white; padding: 20px; border-radius: 10px; max-width: 500px;">
                    <h3 style="color: #d63384; margin-top: 0;">${title}</h3>
                    <p>${message}</p>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button onclick="this.parentElement.parentElement.remove()" 
                                style="padding: 10px 20px; background: #f1f1f1; border: none; border-radius: 5px;">
                            Cerrar
                        </button>
                        <button onclick="window.open('https://forms.gle/6r4N6V6giwsxmvJ37', '_blank'); this.parentElement.parentElement.remove()" 
                                style="padding: 10px 20px; background: linear-gradient(to right, #ff6b6b, #ff8e8e); 
                                       color: white; border: none; border-radius: 5px;">
                            ¡Actualizar ahora!
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        // Modificar funciones para deshabilitar edición/eliminación en DEMO
        function loadIngredients() {
            const tbody = document.getElementById('ingredients-list');
            tbody.innerHTML = '';
            
            if (ingredients.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5">No hay ingredientes registrados</td></tr>';
                return;
            }
            
            ingredients.forEach(ingredient => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${ingredient.name}</td>
                    <td>$${ingredient.price.toFixed(2)}</td>
                    <td>${ingredient.quantity} ${ingredient.unit}</td>
                    <td>$${ingredient.unitPrice.toFixed(6)}/${ingredient.unit}</td>
                    <td>
                        <button class="disabled-feature" style="width: auto;">Editar</button>
                        <button class="disabled-feature" style="width: auto;">Eliminar</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Mostrar advertencia si se acerca al límite
            if (ingredients.length >= MAX_INGREDIENTS_DEMO - 1) {
                const warning = document.createElement('tr');
                warning.innerHTML = `
                    <td colspan="5" style="background-color: #fff3cd; color: #856404; text-align: center;">
                        <strong>¡Límite de ingredientes alcanzado!</strong> Actualiza a la versión completa para agregar más.
                    </td>
                `;
                tbody.appendChild(warning);
            }
        }
        
        // ... (aplicar cambios similares para loadRecipes y loadSales) ...
        
        // Al cargar la página, verificar y mostrar advertencias
        document.addEventListener('DOMContentLoaded', function() {
            // ... (código anterior) ...
            
            // Mostrar advertencia si se acerca a los límites
            checkLimits();
        });
        
        function checkLimits() {
            // Verificar ingredientes
            if (ingredients.length >= MAX_INGREDIENTS_DEMO - 1) {
                const ingredientCard = document.querySelector('#ingredients .card');
                const warning = document.createElement('div');
                warning.className = 'product-limit';
                warning.textContent = `¡Has alcanzado ${ingredients.length} de ${MAX_INGREDIENTS_DEMO} ingredientes permitidos! Actualiza para eliminar este límite.`;
                ingredientCard.prepend(warning);
            }
            
            // Verificar recetas
            if (recipes.length >= MAX_RECIPES_DEMO - 1) {
                const recipesCard = document.querySelector('#recipes .card');
                const warning = document.createElement('div');
                warning.className = 'product-limit';
                warning.textContent = `¡Has alcanzado ${recipes.length} de ${MAX_RECIPES_DEMO} recetas permitidas! Actualiza para eliminar este límite.`;
                recipesCard.prepend(warning);
            }
            
            // Verificar ventas
            if (sales.length >= MAX_SALES_DEMO - 1) {
                const salesCard = document.querySelector('#sales .card');
                const warning = document.createElement('div');
                warning.className = 'product-limit';
                warning.textContent = `¡Has alcanzado ${sales.length} de ${MAX_SALES_DEMO} ventas permitidas! Actualiza para eliminar este límite.`;
                salesCard.prepend(warning);
            }
        }
    </script>
</body>
</html>
